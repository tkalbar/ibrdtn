% -----------------------------------------------
%
%   Introduction
%
% -----------------------------------------------
\section{Introduction}
Applications in delay-tolerant networks (DTNs) often desire to both track the path(s) of data through the network and to directly influence the movement of the data. DTNs are almost always integrated into some physical space that also influences that movement of nodes, data, and the phenomena about which the nodes communicate. In traditional IP networks, the {\bf traceroute} tool and {\bf source routing} protocols have assisted in {\em tracking} and {\em directing} packets of data, but the focus has traditionally been on movement through the logical network and not through physical space.

When the physical and logical intertwine, there is a desire to for data movement to reflect various aspects of the physical space the data inhabits. We address the dual challenges of {\em tracking} data as it moves through space and time and intentionally {\em routing} data through space and time. As an exemplar of tracking, consider the need for {\em data provenance} in sensing aggregation. As an aggregate collects information sensed about a physical phenomenon, the aggregate may need to dynamically compute the data {\em coverage} by tracking where the aggregate has traveled and collected information~\cite{michel12:spatiotemporal}. As an exemplar of the routing challenge, consider a piece of data that measures the concentration of a gas leak. Users in the area where the gas is expected to dissipate should be warned; this can be accomplished by associating the data item with a route through space and time that captures this expected dissipation. Tracking and routing can also be combined; imagine a generic scenario in which a {\em publisher} generates a piece of data that tracks its movement {\em en route} to a {\em subscriber}. Upon receiving the publication, the subscriber sends a response that must follow the reverse path of the original publication. This generic situation is a stand-in for a variety of concrete applications. For example, the original publication may have reserved some resources along the routing path that the return response relies on. We refer to this general situation as a maze traversal; a prisoner in the maze sends a probe that tracks its path as it attempts to exit the maze. When it reaches the exit, the responder (e.g. a rescuer) sends a response packet back to the prisoner along the same path through the maze.

Our problem of tracking differs substantially from the goals of existing utilities, not only in terms of the transition from logical network hops to physical spaces but also because the route a bundle in a DTN takes may not be stable (one bundle may pass through a given sequence of nodes, while a bundle sent just a minute later may take a different route). It therefore may often be important to track the route of {\em each} bundle. In our tracking facility, we track {\em both} logical network hops and the sequence of geographic locations it visits (whether because a device at one location transmits the bundle to a device at a different location or because the device holding the bundle moves). Besides being an illuminating diagnostic tool to understand the behavior of a DTN, tracking a bundle's geographic route can capture important meta-information related to the bundle's contents, as motivated above. 

Source routing, in which a packet carries with it the specific network hops it must traverse, and geographic routing, where packet routing is based on physical locations, have been popular in mobile ad hoc networks~\cite{johnson96:dynamic, karp00:gpsr}. We combine these approaches into a geographically informed version of source routing. Previous approaches to geographic routing predominantly use a {\em greedy} approach in which locally optimal decisions are used to move a bundle incrementally closer to its destination. Our approach to {\em geo-source routing} differs in that it allows the sender to pre-specify a sequence of geo-locations that serve as routing {\em waypoints}. This style of approach can solve a variety of challenges associated with traditional geographic routing. For example by explicitly directing the geographic path of a bundle, our protocol can explicitly route around known dead-ends in the network or around known areas of congestion in the network. Combining this style of geo-routing with other approaches could, for example, ensure that network coded bundles~\cite{petz11:network, widmer05:network} take sufficiently diverse routes through the network.

We introduce the {\sc breadcrumb} router, which implements geo-source routing on DTN bundles that can pre-specify their own delivery paths by providing a combination of geo-locations and logical network hops. 
%In our {\sc breadcrumb} router, elements in this sequence can be {\em required}, meaning that the bundle must touch the specified logical or physical location or {\em optional}, meaning that the sequence serves as a suggestion that the {\sc breadcrumb} router can use simply to guide its decision making. 
Each geo-location comes with a {\em margin of error}, which allows the {\sc breadcrumb} router to be satisfied by getting the bundle {\em near} the specified location without exactly reaching it. We introduce two data structures ({\em extension blocks}, in DTN parlance) that can be associated with bundles. The {\em GeoRouting} block holds the sequence of logical and geographical locations used to support geo-source routing. The {\em GeoTracking} block allows any bundle to collect a sequence of locations it visits in both logical and physical space. We describe these three components conceptually and show how we have implemented them in the IBR-DTN implementation of the bundle routing protocol~\cite{IBR-DTN-WASA}. We connect the {\sc breadcrumb} router to our existing Java-based implementation of {\em spatiotemporal trajectories}~\cite{michel12:spatiotemporal}, in which applications can perform expressive computations over data items given knowledge of their movements in space and time and geo-tracking and geo-routing of bundles on a pair of mobility scenarios.



%{\color{blue}
%Since the dawn of time, man has wanted to know where the heck his bundles went, and to send them back on a specific geo-coded route.  Our new BreadCrumb Router and its associated extension block processors satisfy this cosmic desire of human existence.  

%The {\bf traceroute} tool is a staple of traditional IP networks.  It allows a user or administrator to discover the sequence of IP routers their packets pass through between a specific source and destination.  Traceroute works by taking advantage of existing IGMP hop-count and reporting requirements.  Bundle Protocol as defined in RFC5050 has no inherent facility that can achieve this.  Furthermore, because the route a bundle takes may not be stable (one bundle may pass through one sequence of nodes, and a bundle sent a minute later may take another route) it is more salient in a DTN to comprehensively track the entire route of a single bundle, rather than send a series of bundles to probe the network.  Therefore bundle tracking functionality must be built fully as an extension to BP.  Additionally, since in many use cases the geographic mobility of the nodes in a DTN plays an integral part in the routing and delivery of a bundle, tracking the geographic route a bundle follows can be at least as interesting, and possibly {\it more} salient than the logical hops the bundle passes through.

%Besides being an illuminating diagnostic tool to understand the behavior of a DTN, tracking the geographic route of a bundle can capture important meta-information related to the contents of a bundle.  The simplest example of this is simply geo-tagging the location where a bundle originated.  A more involved example is tinkerpopping the datums of an oil slick with trajectories with a graph database as described in \cite{jonas-paper} and to be elaborated on here and in the following sections by Jonas and Christine.  Datums: it's the plural of ``datum'' when you're talking about geodetic information, dammit!

%Converse to simply geotracking a bundle, we build a prototype router for source geo-routing of a bundle.  In traditional IP networks, extensions to support source routing are defined for both IPv4 and IPv6, but are rarely used and often not supported or blocked.  On the other hand source routing is an integral part of some MANET routing protocols \cite{some-DSR-paper}.  Some reasons source routing could be used are to probe the structure of a network, or to specify that packets should avoid sections of a network that are known to be problematic because of congestion, reliability, or security concerns.  Implementing this type of {\it logical} hop-based source routing in DTN is certainly feasible, but in a dynamic mobile network is is difficult to imagine that a source will know exactly which intermediate nodes will be available to ferry its bundles.  Considering the importance of the geographic path in DTN routing, we propose geographic source routing.  In this system a sender can specify both logical (intermediate nodes) and geographic waypoints a bundle must pass through on its way to the destination.

%Geographic routing has been proposed and used in many DTN scenarios \cite{paper1,paper2,paper3,paper4,paper5,paper6}.  In most cases greedy geographic routing is used locally to move a bundle closer to a destination.  In other cases large-scale logical hops over an infrastructure network are used to get a bundle to a general geographic area of interest, and then other types of routing take precedence to get the bundle to its final destination.  Source geo-routing is different in that it allows a sender to pre-specify solutions to problems that can arise from greedy geographic routing.  Some of these issues and goals are:
%\begin{itemize}
%  \item avoiding known dead-ends in the network. I.e. local minima in the greedy geographic routing heuristic.
%  \item avoiding geographic areas where unreliability or congestion is anticipated.  For example if a shortest geographic route goes past a baseball stadium, but a game is scheduled for that day, a source may request that a bundle be routed around the expected traffic jam.
%  \item ensuring that network coded bundles take sufficiently diverse routes.  Since network coded information can be viewed as a shared secret problem, ensuring that not all of the encodings are ever in the same geographic area could be a security measure in a DTN.
%\end{itemize}
%\footnote{Brenton's original text, a lot of which gets reused in the above structure}
%}